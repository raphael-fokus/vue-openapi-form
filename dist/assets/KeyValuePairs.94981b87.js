import{_ as C,d as D,a as N,b as q,p as S,q as T,r,o,c as V,e as d,g as B,t as M,f as s,F as w,x as J,s as m,k as p,h as b,n as L,w as R}from"./index.eadbad00.js";import{t as E}from"./tabs.a098c89a.js";import{s as F}from"./size.0cf66cbd.js";const I=D({name:"KeyValuePairs",components:{KeyValuePairItems:N(()=>q(()=>import("./KeyValuePairItems.0c344074.js"),["assets/KeyValuePairItems.0c344074.js","assets/index.eadbad00.js","assets/index.4f0a8e9b.css"]).then(e=>e.default))},mixins:[S,E,T,F],props:{schema:{type:Object,default:()=>({})},fieldName:{type:String,default:""},modelValue:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})},isLastChild:{type:Boolean,default:!1}},data(){return{newData:null,updatePass:0,keyValueArray:null,referencekeyValueArray:null,newKey:"",newValue:null}},computed:{additionalProperties(){return this.schema.additionalProperties||{}}},watch:{keyValueArray:{immediate:!0,deep:!0,handler(e,a){if(a!=null){const u=JSON.stringify(e);this.modelData=this.reconstructObject(JSON.parse(u))}}},activeTab(){this.initKeyValueArray(),this.initReferenceKeyValueArray()},modelValue:{deep:!0,immediate:!0,handler(e,a){const u=JSON.stringify(e),c=JSON.stringify(a);u!==c&&this.initKeyValueArray(),this.initReferenceKeyValueArray()}}},methods:{initKeyValueArray(){this.keyValueArray=Object.keys(this.modelValue).map(e=>({key:e,value:this.modelValue[e]||null}))},initReferenceKeyValueArray(){this.referencekeyValueArray=Object.keys(this.referenceModel).map(e=>({key:e,value:this.referenceModel[e]||null}))},updateKeyValueArray(e){this.keyValueArray=Object.keys(e).map(a=>({key:a,value:e[a]}))},reconstructObject(e){let a={};return e.forEach(u=>{a=Object.assign({},{...a},{[`${u.key}`]:u.value})}),a},async addProp(e){const{valid:a}=await e();a&&(this.keyValueArray.push({key:this.newKey,value:this.newValue}),this.newKey="",this.newValue=null,this.updatePass+=1)},deleteProp(e){this.keyValueArray.splice(e,1),this.updatePass+=1}}}),z={class:"nested-header mb-5"},G={class:"is-flex is-semi-normal"},H=d("div",{class:"collaps-icon is-disabled"},[d("i",{"aria-hidden":"true",class:"fa fa-minus"})],-1),Q=["onClick"],W=d("span",{class:"icon"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])],-1),X=[W];function Y(e,a,u,c,Z,_){const k=r("component-errors"),P=r("tabs"),g=r("key-value-pair-items"),h=r("simple-input"),y=r("v-field"),A=r("object-form-wrapper"),U=r("key-value-pairs",!0),K=r("array-input"),$=r("v-form"),j=r("yaml-form"),O=r("json-form");return o(),V("div",{class:L(["ac-nested-elements key-value-pairs is-flex is-flex-direction-column gap-8",{"stop-line":e.isLastChild}])},[d("div",z,[d("h6",G,[H,B(" "+M(e.schema.title||"Array Item Description"),1),s(k,{errors:e.calcFormErrors(e.errors,e.fieldName)},null,8,["errors"])]),s(P,{modelValue:e.activeTab,"onUpdate:modelValue":a[0]||(a[0]=i=>e.activeTab=i)},null,8,["modelValue"])]),e.activeTab==="form"?(o(),V(w,{key:0},[(o(!0),V(w,null,J(e.keyValueArray,(i,t)=>(o(),V("div",{key:`${t}-${e.schema.title}-form`},[s(g,{modelValue:e.keyValueArray[t],"onUpdate:modelValue":l=>e.keyValueArray[t]=l,"field-name":e.fieldName,"reference-model":e.referencekeyValueArray[t]||{},index:t,schema:e.schema,"additional-properties":e.additionalProperties,errors:e.errors,onDeleteKeyValue:e.deleteProp},null,8,["modelValue","onUpdate:modelValue","field-name","reference-model","index","schema","additional-properties","errors","onDeleteKeyValue"])]))),128)),(o(),m($,{id:`${e.schema.title.replace(/ /g,"-")}-new-observer`,key:e.updatePass,as:"div",class:"key-value-save"},{default:p(({validate:i,errors:t})=>[s(y,{id:`${e.schema.title.replace(/ /g,"-")}-key-provider`,modelValue:e.newKey,"onUpdate:modelValue":a[1]||(a[1]=l=>e.newKey=l),rules:"required",name:"newKey",label:`${e.schema.title} new key`,as:"div"},{default:p(({field:l,handleChange:n,errors:f,meta:v})=>[s(h,{"model-value":l.value,schema:{title:"Key",type:"string",ui:{tag:"input",type:"text"}},type:"string","validation-ob":{errors:f,...v},"reference-model":"","onUpdate:modelValue":n},null,8,["model-value","validation-ob","onUpdate:modelValue"])]),_:1},8,["id","modelValue","label"]),e.additionalProperties.type==="object"?(o(),m(y,{key:0,id:`${e.schema.title.replace(/ /g,"-")}-value-provider`,modelValue:e.newValue,"onUpdate:modelValue":a[2]||(a[2]=l=>e.newValue=l),rules:"required",name:"newValue",label:`${e.schema.title} new value`,as:""},{default:p(({field:l,handleChange:n})=>[s(A,{"field-name":"newValue","model-value":l.value,"is-last-child":!0,"is-self-required":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:t,"reference-model":{},"onUpdate:modelValue":n},null,8,["model-value","schema","type","errors","onUpdate:modelValue"])]),_:2},1032,["id","modelValue","label"])):e.additionalProperties.type==="key-value-pairs"?(o(),m(y,{key:1,id:`${e.schema.title.replace(/ /g,"-")}-value-provider`,modelValue:e.newValue,"onUpdate:modelValue":a[3]||(a[3]=l=>e.newValue=l),rules:"required",name:"newValue",label:`${e.schema.title} new value`,as:""},{default:p(({field:l,handleChange:n})=>[s(U,{"field-name":"newValue","model-value":l.value,"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:t,"reference-model":{},"onUpdate:modelValue":n},null,8,["model-value","schema","type","errors","onUpdate:modelValue"])]),_:2},1032,["id","modelValue","label"])):e.additionalProperties.type==="array"?(o(),m(y,{key:2,id:`${e.schema.title.replace(/ /g,"-")}-value-provider`,modelValue:e.newValue,"onUpdate:modelValue":a[4]||(a[4]=l=>e.newValue=l),rules:"required",name:"newValue",label:`${e.schema.title} new value`,as:""},{default:p(({field:l,handleChange:n})=>[s(K,{"field-name":"newValue","model-value":l.value,"is-last-child":!0,schema:e.additionalProperties,type:e.additionalProperties.type,errors:t,"reference-model":[],"onUpdate:modelValue":n},null,8,["model-value","schema","type","errors","onUpdate:modelValue"])]),_:2},1032,["id","modelValue","label"])):(o(),m(y,{key:3,id:`${e.schema.title.replace(/ /g,"-")}-value-provider`,modelValue:e.newValue,"onUpdate:modelValue":a[5]||(a[5]=l=>e.newValue=l),rules:"required",name:"newValue",label:`${e.schema.title} new value`,as:""},{default:p(({field:l,handleChange:n,errors:f,meta:v})=>[s(h,{"model-value":l.value,schema:e.additionalProperties,type:e.additionalProperties.type,"validation-ob":{errors:f,...v},"reference-model":"","onUpdate:modelValue":n},null,8,["model-value","schema","type","validation-ob","onUpdate:modelValue"])]),_:1},8,["id","modelValue","label"])),d("button",{class:"button ac-button is-medium is-square is-primary is-outlined",onClick:R(l=>e.addProp(i),["prevent"])},X,8,Q)]),_:1},8,["id"]))],64)):b("",!0),e.activeTab==="yaml"?(o(),m(j,{key:1,modelValue:e.modelData,"onUpdate:modelValue":a[6]||(a[6]=i=>e.modelData=i),"reference-model":e.referenceModel||{},"onCode::modelDataUpdated":e.updateKeyValueArray},null,8,["modelValue","reference-model","onCode::modelDataUpdated"])):e.activeTab==="json"?(o(),m(O,{key:2,modelValue:e.modelData,"onUpdate:modelValue":a[7]||(a[7]=i=>e.modelData=i),"reference-model":e.referenceModel||{},"onCode::modelDataUpdated":e.updateKeyValueArray},null,8,["modelValue","reference-model","onCode::modelDataUpdated"])):b("",!0)],2)}var le=C(I,[["render",Y]]);export{le as default};
